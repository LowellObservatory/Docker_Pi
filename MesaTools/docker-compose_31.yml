version: '3'
services:
  domeTattler:
    build:
      context: './domeTattler/'
      dockerfile: Dockerfile
    image: 'ligpibase-dometattler'
    container_name: 'domeTattler'
    user: ${DCUSERID}
    privileged: true
    volumes:
      - ${DCDATADIR}/logs/domeTattler/:/home/lig/domeTattler/logs/
      - ${DCDEVDIR}/config/domeTattler.conf:/home/lig/domeTattler/config/domeTattler.conf
    restart: always
    working_dir: /home/lig/domeTattler/
    command: ["python3", "domeTattler.py"]
    networks:
      - default

  onewireTemps:
    build:
      context: './onewireTemps/'
      dockerfile: Dockerfile
    image: 'ligpibase-onewire'
    container_name: 'onewireTemps'
    user: ${DCUSERID}
    privileged: true
#    devices:
#      - /sys/devices/w1_bus_master1:/sys/devices/w1_bus_master1
    volumes:
      - ${DCDATADIR}/logs/onewireTemps/:/home/lig/onewireTemps/logs/
      - ${DCDEVDIR}/config/dbconfig.conf:/home/lig/onewireTemps/config/dbconfig.conf
    restart: always
    working_dir: /home/lig/onewireTemps/
    command: ["python3", "onewireTemps.py"]
    networks:
      - default

networks:
  default:
    driver: bridge
